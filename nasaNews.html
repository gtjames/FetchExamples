<!DOCTYPE html>
<html lang="en">

<head>
    <title>NASA News</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://www.w3schools.com/lib/w3-theme-indigo.css" id="css" >
    <link rel="stylesheet" href="styles/styles.css">
</head>
<body>

<div class="w3-container w3-theme-l1">
    <div id="menu" class="w3-bar"></div>
</div>

<div class="w3-container w3-theme w3-padding-16">
    <label for="searchField">Search for NASA News</label>
    <input type="text" id="searchField" value="mars">
    <button id="searchBtn">Search</button>
    <p>Columns are sortable</p>
</div>
<div class="w3-container w3-theme-l3 w3-padding-16">
    <table class='w3-table-all sortable w3-theme'>
        <thead>
        <tr class="w3-theme-l4 w3-bordered">
            <th></th> <th>Title</th> <th>Source</th><th>Description</th>
        </tr>
        </thead>
        <tbody id='tbody'>   </tbody>
    </table>
</div>
</body>
<script>
    let searchBtn = document.getElementById('searchBtn');
    searchBtn.addEventListener('click', search);
/*
    https://api.spaceflightnewsapi.net/v3/articles
    https://api.spaceflightnewsapi.net/v3/reports
    https://api.spaceflightnewsapi.net/v3/blogs
    https://ll.thespacedevs.com/2.2.0/event/?search=Dragon&limit=10&offset=10

 :"https://www.nasaspaceflight.com/wp-content/uploads/2023/04/NSF-2023-04-06-14-20-26-372-1170x826.jpg",
 :"NASASpaceflight",
 :"https://www.nasaspaceflight.com/2023/04/starship-targeting-h2-april/"
*/
function search() {
        let searchText = document.getElementById('searchField').value;
        fetch(`https://api.spaceflightnewsapi.net/v3/articles?_limit=5&_start=1`)
            .then(resp => resp.json())          //  wait for the response and convert it to JSON
            .then(results => renderPage(results));
    }
    function renderPage(news) {
        let tableBody = document.getElementById('tbody');
        let arHtml = news.map((b,idx) =>
            `<tr class="w3-theme-${idx%2>0?'l2':'l3'}">
                <td><a href=${b.url}><img src=${b.imageUrl} height='120px' alt=""></a></td>
                <td>${b.title}</td>
                <td>${b.newsSite}</td>
                <td>${b.summary}</td>
            </tr>`
        );
        let txt = arHtml.join("\n")
        tableBody.innerHTML = txt;
    }
</script>
<script src="js/menu.js"></script>
<script src="js/sortColumns.js"></script>
<script>makeMeActive('NASA News')</script>

</html>